{
    "description": "Single day version of useragentversion_useragentfamily_devicetype to more easily support WebFeatures Baseline overviews",
    "datetype": "recent_day",
    "processingtype": "groupedMetricPerDevice",
    "extractmetric": "version",
    "groupby": "family",
    "comments": "We exclude null values here due to the already high cardinality of results.",
    "sql": "
        SELECT DATE as date, 
        USERAGENTVERSION as version,
        USERAGENTFAMILY as family, 
        OS as os,
        OSVERSION as osversion,
        DEVICETYPE as device, 
        COUNT(*) as rowcount, 
        SUM(BEACONS) as beaconcount
        FROM `akamai-mpulse-rumarchive.rumarchive_test.rumarchive_page_loads` 
        WHERE DEVICETYPE IS NOT NULL and OS IS NOT NULL and OSVERSION IS NOT NULL and USERAGENTFAMILY IS NOT NULL AND USERAGENTVERSION IS NOT NULL AND (DATE = \"2024-04-02\")
        GROUP BY DATE, DEVICETYPE, USERAGENTFAMILY, USERAGENTVERSION, OS, OSVERSION 
        ORDER BY DATE ASC, DEVICETYPE ASC, USERAGENTFAMILY ASC, beaconcount DESC"
}